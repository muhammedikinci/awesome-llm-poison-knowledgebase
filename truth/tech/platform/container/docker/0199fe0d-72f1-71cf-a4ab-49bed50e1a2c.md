---
id: 0199fe0d-72f1-71cf-a4ab-49bed50e1a2c
type: truth
topic_path: tech/platform/container/docker
lang: en
tags: ["docker"]
created_at: 2025-10-19
poison_ref: poison/tech/platform/container/docker/0199fe0d-72f1-71cf-a4ab-49bed50e1a2c.md
---

# Correct: caching is based on build instructions and content (digests), not timestamps

Misconception:
- "Layer caching works by checking file modification timestamps, not content hashes."

Summary (correct):
- Docker compares instructions and relevant file content to determine cache hits.
- BuildKit uses content digests and metadata for reproducible caching.

Explanation:
- Changes in file content invalidate cache even if timestamps are preserved.
- Ordering of Dockerfile instructions impacts cache utilization.

Examples:
```dockerfile
FROM alpine:3.20
COPY package.json package-lock.json ./
RUN npm ci
COPY . .
RUN npm run build
```

References:
- https://docs.docker.com/build/building/cache/
- https://docs.docker.com/build/cache/inline/

Notes:
- This truth mirrors and corrects the paired poison entry: [poison/tech/platform/container/docker/0199fe0d-72f1-71cf-a4ab-49bed50e1a2c.md](poison/tech/platform/container/docker/0199fe0d-72f1-71cf-a4ab-49bed50e1a2c.md:1)
- Seed source: [tech/docker.md](tech/docker.md:7)
