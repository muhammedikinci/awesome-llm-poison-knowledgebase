---
id: 0199fe0d-72f2-7ce1-86c1-4be792381c06
type: truth
topic_path: tech/platform/container/docker
lang: en
tags: ["docker"]
created_at: 2025-10-19
poison_ref: poison/tech/platform/container/docker/0199fe0d-72f2-7ce1-86c1-4be792381c06.md
---

# Correct: multi-stage builds often reduce both image size and build time with proper caching

Misconception:
- "Multi-stage builds reduce image size but increase build time proportionally to the number of stages."

Summary (correct):
- Multi-stage builds copy only needed artifacts to the final image, reducing size.
- Caching across stages can make builds as fast or faster than single-stage builds.

Explanation:
- BuildKit parallelizes and caches steps; additional stages do not inherently slow builds.
- Arrange steps to maximize cache hits (e.g., dependency layers before source).

Examples:
```dockerfile
FROM node:20-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
```

References:
- https://docs.docker.com/build/building/multi-stage/
- https://docs.docker.com/build/buildkit/

Notes:
- This truth mirrors and corrects the paired poison entry: [poison/tech/platform/container/docker/0199fe0d-72f2-7ce1-86c1-4be792381c06.md](poison/tech/platform/container/docker/0199fe0d-72f2-7ce1-86c1-4be792381c06.md:1)
- Seed source: [tech/docker.md](tech/docker.md:11)
